name: Deployment Task
description: Track deployment configuration, setup, or migration tasks
title: "[DEPLOY] "
labels: ["deployment", "infrastructure"]
body:
  - type: markdown
    attributes:
      value: |
        Use this template for deployment-related tasks such as:
        - Setting up new deployment environments
        - Configuring deploy previews
        - Updating deployment settings
        - Migrating between hosting providers
        
  - type: dropdown
    id: environment
    attributes:
      label: Environment
      description: Which environment is this deployment task for?
      options:
        - Production
        - Staging
        - Deploy Previews
        - Development
        - Multiple/All
    validations:
      required: true
      
  - type: dropdown
    id: component
    attributes:
      label: Component
      description: Which part of the application?
      options:
        - Frontend (React/Netlify)
        - Backend (API/Fly.io)
        - Database
        - Both Frontend and Backend
        - Infrastructure/Configuration
    validations:
      required: true
      
  - type: textarea
    id: description
    attributes:
      label: Description
      description: Detailed description of the deployment task
      placeholder: |
        Example: Configure Netlify deploy previews to use staging backend API
    validations:
      required: true
      
  - type: textarea
    id: current-state
    attributes:
      label: Current State
      description: What is currently deployed or configured?
      placeholder: |
        - Frontend deployed to: gsc-tracking-ui.netlify.app
        - Deploy previews: Not configured
        - Backend staging: gsc-tracking-api-staging.fly.dev
    validations:
      required: false
      
  - type: textarea
    id: desired-state
    attributes:
      label: Desired State
      description: What should be deployed or configured?
      placeholder: |
        - Deploy previews enabled for all PRs
        - Preview URLs connect to staging backend
        - Environment variables configured per context
    validations:
      required: true
      
  - type: textarea
    id: acceptance-criteria
    attributes:
      label: Acceptance Criteria
      description: How will we know this is complete?
      placeholder: |
        - [ ] Deploy preview created for test PR
        - [ ] Preview connects to staging API (verified in browser console)
        - [ ] Production deployment unaffected
        - [ ] Documentation updated
    validations:
      required: true
      
  - type: textarea
    id: technical-details
    attributes:
      label: Technical Details
      description: Configuration changes, URLs, settings, etc.
      placeholder: |
        netlify.toml changes needed:
        - Add [context.deploy-preview] section
        - Set VITE_API_URL for preview context
        
        Environment Variables:
        - VITE_API_URL (production): https://gsc-tracking-api.fly.dev/api
        - VITE_API_URL (preview): https://gsc-tracking-api-staging.fly.dev/api
    validations:
      required: false
      
  - type: textarea
    id: auth-cors-concerns
    attributes:
      label: Auth0/CORS Considerations
      description: |
        Any concerns about CORS, Auth0, or wildcard URLs?
        See docs/CORS-AUTH0-CONSIDERATIONS.md for guidance
      placeholder: |
        - Will this affect CORS configuration?
        - Does Auth0 need URL registration?
        - Are wildcards involved?
        - Mitigation strategy?
    validations:
      required: false
      
  - type: dropdown
    id: risk-level
    attributes:
      label: Risk Level
      description: Risk of this deployment change causing issues
      options:
        - Low (Configuration only, easy rollback)
        - Medium (New feature, may affect some users)
        - High (Major change, affects all users)
        - Critical (Database migration, downtime expected)
    validations:
      required: true
      
  - type: textarea
    id: rollback-plan
    attributes:
      label: Rollback Plan
      description: How to undo this change if something goes wrong
      placeholder: |
        1. In Netlify dashboard: Deploys → Find previous deploy → Publish
        2. Remove netlify.toml changes and push to main
        3. Revert PR in GitHub
        
        Rollback time: < 5 minutes
    validations:
      required: false
      
  - type: textarea
    id: testing-plan
    attributes:
      label: Testing Plan
      description: How will this be tested before going live?
      placeholder: |
        1. Test on feature branch first
        2. Verify preview deploy works
        3. Check environment variables in browser console
        4. Confirm API calls succeed
        5. Get team to review preview
    validations:
      required: false
      
  - type: textarea
    id: documentation
    attributes:
      label: Documentation
      description: Links to relevant documentation
      placeholder: |
        - docs/NETLIFY-DEPLOYMENT.md
        - docs/NETLIFY-EXISTING-SITE-SETUP.md
        - docs/CORS-AUTH0-CONSIDERATIONS.md
    validations:
      required: false
      
  - type: dropdown
    id: priority
    attributes:
      label: Priority
      description: How urgent is this deployment task?
      options:
        - Critical (blocking other work)
        - High
        - Medium
        - Low
    validations:
      required: true
      
  - type: textarea
    id: dependencies
    attributes:
      label: Dependencies
      description: What must be done first or simultaneously?
      placeholder: |
        - Backend staging must be deployed first
        - Auth0 configuration (if authentication affected)
        - DNS changes (if custom domain)
    validations:
      required: false
      
  - type: textarea
    id: estimated-effort
    attributes:
      label: Estimated Effort
      description: How long will this take?
      placeholder: |
        Configuration: 30 minutes
        Testing: 1 hour
        Documentation: 30 minutes
        Total: 2 hours
    validations:
      required: false
      
  - type: textarea
    id: communication-plan
    attributes:
      label: Communication Plan
      description: Who needs to be notified? When?
      placeholder: |
        Before: Notify team in Slack #dev-channel
        During: Post status updates in PR
        After: Update team wiki with new workflow
    validations:
      required: false
      
  - type: textarea
    id: context
    attributes:
      label: Additional Context
      description: Any other relevant information, screenshots, or links
      placeholder: |
        - Related PRs: #123, #456
        - Slack discussion: link to thread
        - Cost impact: $0 (within free tier)
    validations:
      required: false
